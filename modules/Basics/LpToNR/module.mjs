export const name = 'LpToNR';

export const caption = 'LpToNR';

export const description = "Calculate Noise Rating from Lp. WARNING : Max is NR75"

export const inputs = [
    { id: "in1", type: 'spectrum', typeName: "Lp", description: 'Input Lp'},
];

export const parameters = [
];

export const readonly_outputs = [
];

export const outputs = [
    { id: "out1", type: 'int', typeName: "NR", description: 'Output NR' },
];

var NR = {

	NR75: [94.70, 87.20, 81.70, 77.90, 75.00, 72.60, 70.80, 69.10],
	NR74: [93.90, 86.30, 80.80, 76.90, 74.00, 71.60, 69.80, 68.20],
	NR73: [93.10, 85.50, 79.90, 75.90, 73.00, 70.60, 68.80, 67.20],
	NR72: [92.40, 84.60, 78.90, 75.00, 72.00, 69.50, 67.70, 66.10],
	NR71: [91.60, 83.80, 78.00, 74.00, 71.00, 68.50, 66.70, 65.10],
	NR70: [90.80, 82.90, 77.10, 73.00, 70.00, 67.50, 65.70, 64.10],
	NR69: [90.00, 82.00, 76.20, 72.00, 69.00, 66.50, 64.70, 63.10],
	NR68: [89.20, 81.10, 75.20, 71.00, 68.00, 65.50, 63.60, 62.00],
	NR67: [88.40, 80.30, 74.30, 70.10, 67.00, 64.50, 62.60, 61.00],
	NR66: [87.60, 79.40, 73.30, 69.10, 66.00, 63.50, 61.50, 59.90],
	NR65: [86.80, 78.50, 72.40, 68.10, 65.00, 62.50, 60.50, 58.90],
	NR64: [86.00, 77.60, 71.50, 67.10, 64.00, 61.50, 59.50, 57.90],
	NR63: [85.20, 76.80, 70.60, 66.10, 63.00, 60.50, 58.50, 56.90],
	NR62: [84.50, 75.90, 69.60, 65.20, 62.00, 59.40, 57.40, 55.80],
	NR61: [83.70, 75.10, 68.70, 64.20, 61.00, 58.40, 56.40, 54.80],
	NR60: [82.90, 74.20, 67.80, 63.20, 60.00, 57.40, 55.40, 53.80],
	NR59: [82.10, 73.30, 66.90, 62.20, 59.00, 56.40, 54.40, 52.80],
	NR58: [81.30, 72.40, 65.90, 61.30, 58.00, 55.40, 53.40, 51.70],
	NR57: [80.50, 71.60, 65.00, 60.30, 57.00, 54.30, 52.30, 50.70],
	NR56: [79.70, 70.70, 64.00, 59.40, 56.00, 53.30, 51.30, 49.60],
	NR55: [78.90, 69.80, 63.10, 58.40, 55.00, 52.30, 50.30, 48.60],
	NR54: [78.10, 68.90, 62.20, 57.40, 54.00, 51.30, 49.30, 47.60],
	NR53: [77.30, 68.10, 61.30, 56.40, 53.00, 50.30, 48.30, 46.60],
	NR52: [76.60, 67.20, 60.30, 55.50, 52.00, 49.20, 47.20, 45.50],
	NR51: [75.80, 66.40, 59.40, 54.50, 51.00, 48.20, 46.20, 44.50],
	NR50: [75.00, 65.50, 58.50, 53.50, 50.00, 47.20, 45.20, 43.50],
	NR49: [74.20, 64.60, 57.50, 52.50, 49.00, 46.20, 44.20, 42.50],
	NR48: [73.40, 63.70, 56.50, 51.50, 48.00, 45.20, 43.10, 41.40],
	NR47: [72.60, 62.90, 55.60, 50.60, 47.00, 44.20, 42.10, 40.40],
	NR46: [71.80, 62.00, 54.60, 49.60, 46.00, 43.20, 41.00, 39.30],
	NR45: [71.00, 61.10, 53.60, 48.60, 45.00, 42.20, 40.00, 38.30],
	NR44: [70.20, 60.20, 52.70, 47.60, 44.00, 41.20, 39.00, 37.30],
	NR43: [69.40, 59.40, 51.80, 46.70, 43.00, 40.20, 38.00, 36.30],
	NR42: [68.70, 58.50, 51.00, 45.70, 42.00, 39.10, 36.90, 35.20],
	NR41: [67.90, 57.70, 50.10, 44.80, 41.00, 38.10, 35.90, 34.20],
	NR40: [67.10, 56.80, 49.20, 43.80, 40.00, 37.10, 34.90, 33.20],
	NR39: [66.30, 55.90, 48.30, 42.80, 39.00, 36.10, 33.90, 32.20],
	NR38: [65.50, 55.00, 47.30, 41.80, 38.00, 35.10, 32.90, 31.10],
	NR37: [64.70, 54.20, 46.40, 40.90, 37.00, 34.00, 31.80, 30.10],
	NR36: [63.90, 53.30, 45.40, 39.90, 36.00, 33.00, 30.80, 29.00],
	NR35: [63.10, 52.40, 44.50, 38.90, 35.00, 32.00, 29.80, 28.00],
	NR34: [62.30, 51.50, 43.60, 37.90, 34.00, 31.00, 28.80, 27.00],
	NR33: [61.50, 50.70, 42.70, 36.90, 33.00, 30.00, 27.80, 26.00],
	NR32: [60.80, 49.80, 41.70, 36.00, 32.00, 28.90, 26.70, 24.90],
	NR31: [60.00, 49.00, 40.80, 35.00, 31.00, 27.90, 25.70, 23.90],
	NR30: [59.20, 48.10, 39.90, 34.00, 30.00, 26.90, 24.70, 22.90],
	NR29: [58.40, 47.20, 39.00, 33.00, 29.00, 25.90, 23.70, 21.90],
	NR28: [57.60, 46.30, 38.00, 32.10, 28.00, 24.90, 22.60, 20.80],
	NR27: [56.80, 45.50, 37.10, 31.10, 27.00, 23.90, 21.60, 19.80],
	NR26: [56.00, 44.60, 36.10, 30.20, 26.00, 22.90, 20.50, 18.70],
	NR25: [55.20, 43.70, 35.20, 29.20, 25.00, 21.90, 19.50, 17.70],
	NR24: [54.40, 42.80, 34.30, 28.20, 24.00, 20.90, 18.50, 16.70],
	NR23: [53.60, 42.00, 33.40, 27.20, 23.00, 19.90, 17.50, 15.70],
	NR22: [52.90, 41.10, 32.40, 26.30, 22.00, 18.80, 16.40, 14.60],
	NR21: [52.10, 40.30, 31.50, 25.30, 21.00, 17.80, 15.40, 13.60],
	NR20: [51.30, 39.40, 30.60, 24.30, 20.00, 16.80, 14.40, 12.60],
	NR19: [50.50, 38.50, 29.70, 23.30, 19.00, 15.80, 13.40, 11.60],
	NR18: [49.70, 37.60, 28.70, 22.30, 18.00, 14.80, 12.40, 10.50],
	NR17: [48.90, 36.80, 27.80, 21.40, 17.00, 13.70, 11.30, 9.50],
	NR16: [48.10, 35.90, 26.80, 20.40, 16.00, 12.70, 10.30, 8.40],
	NR15: [47.30, 35.00, 25.90, 19.40, 15.00, 11.70, 9.30, 7.40],
	NR14: [46.50, 34.10, 25.00, 18.40, 14.00, 10.70, 8.30, 6.40],
	NR13: [45.70, 33.30, 24.10, 17.40, 13.00, 9.70, 7.30, 5.40],
	NR12: [45.00, 32.40, 23.10, 16.50, 12.00, 8.60, 6.20, 4.30],
	NR11: [44.20, 31.60, 22.20, 15.50, 11.00, 7.60, 5.20, 3.30],
	NR10: [43.40, 30.70, 21.30, 14.50, 10.00, 6.60, 4.20, 2.30],
	NR9: [42.60, 29.80, 20.40, 13.50, 9.00, 5.60, 3.20, 1.30],
	NR8: [41.80, 29.00, 19.40, 12.50, 8.00, 4.60, 2.10, 0.20],
	NR7: [41.00, 28.10, 18.50, 11.50, 7.00, 3.60, 1.10, -0.80],
	NR6: [40.20, 27.20, 17.60, 10.50, 6.00, 2.60, 0.10, -1.80],
	NR5: [39.40, 26.40, 16.70, 9.50, 5.00, 1.60, -1.00, -2.90],

}

export function calculate (inputs, parameters) {
	var result = 5;
    for (let freq = 0; freq < 8; freq++) {
        while (inputs["in1"][freq] > NR["NR"+result][freq]) {
            result = result + 1;
			if (result > 75) {
				return {
					"out1": 75
				};
			}
        }
    }
    return {
        "out1": result
    };
};

